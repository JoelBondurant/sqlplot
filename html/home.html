{% include "header.html" %}
<style>
#nav_panel {
	width: 99%;
	height: 30px;
	border: 1px solid #555;
}
@font-face {
	font-family: "Otomanopee One";
	src: url("/font/OtomanopeeOne-Regular.ttf") format("truetype");
}
.bigtext {
	font-family: "Otomanopee One";
	font-size: 42px;
	font-weight: bold;
}
.smoltext {
	font-family: "Otomanopee One";
	font-size: 24px;
}
</style>
</head>
<body>

<div id="main">
	<div id="nav_panel">
		{% if login %}
			<button onclick="window.location.assign('/connection')">connection</button>
			<button onclick="window.location.assign('/query')">query</button>
			<button onclick="window.location.assign('/view')">view</button>
			<button onclick="window.location.assign('/dashboard')">dashboard</button>
			<button onclick="window.location.assign('/team')">team</button>
			<button onclick="window.location.assign('/logout')">logout</button>
		{% else %}
			<button onclick="window.location.assign('/login')">login</button>
			<button onclick="window.location.assign('/signup')">signup</button>
		{% endif %}
	</div>

	<div>
		<center>
			<div class="bigtext">
			Distillery
			</div>
			<div class="smoltext">
			Data Driven Dashboards.<br/>
			<img src="/simg/query_page.png"><br/>
			SQL & Javascript injection as a service.<br/>
			<img width="1246" src="/simg/dashboard_editor.png"><br/>
			<br/><br/>
			</div>
		</center>
	</div>
</div>
<canvas id="canvas" style="position:fixed;top:32;left:0;pointer-events:none;mix-blend-mode:screen;" width="99%" height="99%"></canvas>
<script>
window.onload = function() {

	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	var W = window.innerWidth,
		H = window.innerHeight;
	canvas.width = W;
	canvas.height = H;
	var particles = [];
	for (var i = 0; i < 32; i++)
	{
		particles.push(new particle());
	}

	function particle()
	{
		this.location = {
			x: Math.random() * W,
			y: Math.random() * H
		};
		this.radius = 1;
		this.speed = 3;
		this.angle = Math.random() * 360;
		var r = 33;
		var g = Math.round(Math.random() * 33);
		var b = Math.round(Math.random() * 255);
		var a = Math.random()*0.6;
		this.rgba = "rgba("+r+", "+g+", "+b+", "+a+")";
	}

	function draw()
	{
		ctx.globalCompositeOperation = "source-over";
		ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
		ctx.fillRect(0, 0, canvas.width, canvas.height);
		ctx.globalCompositeOperation = "lighter";
		for (var i = 0; i < particles.length; i++)
		{
			var p = particles[i];
			ctx.fillStyle = "#33f";
			ctx.fillRect(p.location.x, p.location.y, p.radius, p.radius);
			for (var n = 0; n < particles.length; n++)
			{
				var p2 = particles[n];
				var yd = p2.location.y - p.location.y;
				var xd = p2.location.x - p.location.x;
				var distance = Math.sqrt(xd*xd + yd*yd);
				if (distance < 250)
				{
					ctx.beginPath();
					ctx.lineWidth = 2;
					ctx.moveTo(p.location.x, p.location.y);
					ctx.lineTo(p2.location.x, p2.location.y);
					ctx.strokeStyle = p.rgba;
					ctx.stroke();
				}
			}
			p.location.x = p.location.x + p.speed*Math.cos(p.angle*Math.PI/180);
			p.location.y = p.location.y + p.speed*Math.sin(p.angle*Math.PI/180);
			if (p.location.x < 0) { p.location.x = W; }
			if (p.location.x > W) { p.location.x = 0; }
			if (p.location.y < 0) { p.location.y = H; }
			if (p.location.y > H) { p.location.y = 0; }
		}
	}

	function filter() {
		var i,
			j,
			threshold = 10,
			rgb = [],
			imgData = ctx.getImageData(0, 0, W, H),
			Npixels = imgData.data.length;
		for (i = 0; i < Npixels; i += 4) {
				rgb[0] = imgData.data[i];
				rgb[1] = imgData.data[i + 1];
				rgb[2] = imgData.data[i + 2];
				if (rgb[0] < threshold &&
						rgb[1] < threshold &&
						rgb[2] < threshold) {
					imgData.data[i] = 0;
					imgData.data[i + 1] = 0;
					imgData.data[i + 2] = 0;
				}
		}
		ctx.putImageData(imgData, 0, 0);
	}

	setInterval(filter, 90);
	setInterval(draw, 30);
}
</script>

</body>
</html>
